#:kivy 1.0.9

<Ball>:
    size: 50, 50
    canvas:
        Color:
            rgba: (self.ballR/255, self.ballG/255, self.ballB/255, 1)
        Ellipse:
            pos: self.pos 
            size: self.size

<Paddle>:
    size: 200, 25
    canvas:
        Color:
            rgba: (self.paddleR/255, self.paddleG/255, self.paddleB/255, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<CO2>:
    size: 150, 50
    canvas:
        Color:
            rgba: (self.gasR/255, self.gasG/255, self.gasB/255, 1)
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        font_size: '20sp'
        center_x: root.center_x
        center_y: root.center_y
        text: 'CO2'

<CH4>:
    size: 150, 50
    canvas:
        Color:
            rgba: (self.gasR/255, self.gasG/255, self.gasB/255, 1)
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        font_size: '20sp'
        center_x: root.center_x
        center_y: root.center_y
        text: 'CH4'

<Game>:
    canvas.before:
        Rectangle:
            size: self.size
            pos: self.pos
            source: "art/sky.png"
        Rectangle:
            size: self.width, 138
            pos: self.pos[0], self.pos[1] + self.height - 138
            texture: self.cloud_texture
        Rectangle:
            size: self.width, 254
            pos: self.pos[0] + 20, self.pos[1] + self.height - 300
            texture: self.sun_texture

    # canvas to activate at timer intervals. increase opacity as timer gets lower to make screen redder
    canvas:
        Color:
            rgba: (255,0,0,self.canvasOpacity)
        Rectangle:
            size: self.size
            pos: self.pos

    ball: bb_ball
    player1: bb_player
    co2: co2_brick
    ch4: ch4_brick
    
    Ball:
        id: bb_ball
        center_x: root.center_x - self.width * 3
        
    Paddle:
        id: bb_player
        y: root.y + self.height * 2
        center_x: root.center_x

    CO2:
        id: co2_brick
        top: root.top - self.height
        center_x: root.center_x - self.width * 3

    CH4:
        id: ch4_brick
        top: root.top - self.height
        center_x: root.center_x - self.width * 1.5

    Label:
        font_size: '30sp'
        center_x: root.center_x
        top: root.top - self.height
        text: "{:.1f}".format(root.player1.timer)

    Label:
        font_size: '20sp'
        center_x: root.center_x
        top: root.top - self.height * 2
        text: "Radiation: " + str(root.player1.radiation)

<Control>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    player1: bb_player

    Paddle:
        id: bb_player
        y: root.y + self.height * 2
        center_x: root.center_x

    Label:
        font_size: '30sp'  
        center_x: root.center_x
        top: root.top - self.height
        text: "Controls"

    Label:
        font_size: '24sp'
        center_x: root.center_x
        center_y: root.center_y + self.height
        text: 'Touch the screen to move the paddle\nTouch the paddle to change paddle colors'

    Label:
        font_size: '20sp'
        center_x: root.center_x
        center_y: root.center_y - self.height/2
        text: 'Balls must be reflected by paddles of the same color\nRed balls can be reflected off any paddle'

    Label:
        font_size: '40sp'  
        center_x: root.center_x
        center_y: root.center_y - self.height * 2
        text: '[b]Try it out![/b]'
        markup: True

<About>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: '30sp'
        center_x: root.center_x
        top: root.top - self.height
        text: "About"

<ElectroMagneticSpectrum>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: '30sp'
        center_x: root.center_x - self.width/3
        top: root.top - self.height
        text: "EM-Spectrum"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.emText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: '15sp'

<Sun>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: '30sp'  
        center_x: root.center_x
        top: root.top - self.height
        text: "Sun"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.sunText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: '15sp'

<Albedo>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: '30sp' 
        center_x: root.center_x
        top: root.top - self.height
        text: "Albedo"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.albedoText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: '15sp'

<Colors>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: '30sp'  
        center_x: root.center_x
        top: root.top - self.height
        text: "Colors"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.colorsText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: '15sp'

<Gasses>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: '30sp'  
        center_x: root.center_x
        top: root.top - self.height
        text: "Gasses"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.gassesText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: '15sp'

<Manager>:
    id: screen_manager

    Screen:
        name: 'home'
        canvas.after:
            Color:
                rgba: (37/255, 150/255, 190/255, 0.3)
            Rectangle:
                size: self.size
                pos: self.pos
        canvas:
            Rectangle:
                size: self.size
                pos: self.pos
                source: "art/menu.png"
        Button:
            text: 'Play Albreakdo!'
            size_hint: (.3, .15)
            pos: (root.center_x, root.center_y)
            font_size: '15sp'
            on_release: root.current = 'game';game.play()
        Button:
            text: 'Controls'
            size_hint: (.3, .15)
            pos: (root.center_x, root.center_y - self.height * 1.5)
            font_size: '15sp'
            on_release: root.current = 'control'
        Button:
            text: 'About'
            size_hint: (.3, .15)
            pos: (root.center_x, root.center_y - self.height * 3)
            font_size: '15sp'
            on_release: root.current = 'about'
        BoxLayout:
            orientation: 'vertical'
            size_hint: (0.4, 0.2)
            Slider:
                id: durationSlider
                min: 100
                max: 150
                step: 5
                value_track: True
                value_track_color: [0, 1, 0, 1]

            Label:
                text: "Duration: " + str(durationSlider.value)

            Slider:
                id: radiationSlider
                min: 5
                max: 15
                step: 1
                value_track: True
                value_track_color: [1, 0, 0, 1]

            Label:
                text: "Radiation: " + str(radiationSlider.value)

    Screen:
        name: 'game'
        Game:
            id: game

        Button:
            text: 'Pause'
            rgba: (37/255, 150/255, 190/255, 0.5)
            background_color: (37/255, 150/255, 190/255, 0.5)
            size_hint: (0.05, 0.05)
            pos: 115, root.top - 205
            font_size: '10sp'
            on_release: root.current = 'game';game.pause()

    Screen:
        name: 'control'
        Control:
            id: control
        Button:
            text: 'Back to Main Menu'
            rgba: (37/255, 150/255, 190/255, 0.5)
            background_color: (37/255, 150/255, 190/255, 0.7)
            size_hint: (.3, .15)
            pos: (root.center_x + self.width/2, root.center_y + self.height * 2)
            font_size: '15sp'
            on_release: root.current = 'home'

    Screen:
        name: 'about'
        About:
            id: about
        Button:
            text: 'Back to Main Menu'
            rgba: (37/255, 150/255, 190/255, 0.5)
            background_color: (37/255, 150/255, 190/255, 0.7)
            size_hint: (.3, .15)
            pos: (root.center_x + self.width/2, root.center_y + self.height * 2)
            font_size: '15sp'
            on_release: root.current = 'home'
        Button:
            text: 'Electromagnetic Spectrum'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y + self.height)
            font_size: '15sp'
            on_release: root.current = 'em'
        Button:
            text: 'Sun'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y)
            font_size: '15sp'
            on_release: root.current = 'sun'
        Button:
            text: 'Albedo'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y - self.height)
            font_size: '15sp'
            on_release: root.current = 'albedo'
        Button:
            text: 'Colors'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y - self.height * 2)
            font_size: '15sp'
            on_release: root.current = 'colors'
        Button:
            text: 'Gasses'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y - self.height * 3)
            font_size: '15sp'
            on_release: root.current = 'gasses'

    Screen:
        name: 'em'
        ElectroMagneticSpectrum:
            id: em
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:
    Screen:
        name: 'sun'
        Sun:
            id: sun
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:
    Screen:
        name: 'albedo'
        Albedo:
            id: albedo
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:
    Screen:
        name: 'colors'
        Colors:
            id: colors
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:
    Screen:
        name: 'gasses'
        Gasses:
            id: gasses
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:



 